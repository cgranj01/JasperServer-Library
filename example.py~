import sys
from jasperserver.rest import Client
from jasperserver.admin import User
from jasperserver.repository import Resource
from jasperserver.repository import Resources
from jasperserver.exceptions import JsException
from jasperserver.report import Reportv2

try:
    client = Client('http://localhost:8080/jasperserver', 'jasperadmin', 'jasperadmin')
except JsException:
    print 'Error Authentification FAIL!'
    sys.exit(1)


try:
    # Must return a list with one record
    print User(client).search('joeuser')
    print Resources(client).get('fiche')
except JsException:
    print 'Error when send user query'
    sys.exit(1)

try:
    resource1 = Resource(client, '/openerp/bases/openerp_demo/')
    resource1.create('/home/keyuser/workspace/git/JasperServer-Library/template/examplefolder_resource.xml',
    #                '/home/keyuser/workspace/jasperserver/repository/report1.jrxml'
    )
    ###report1 = Reportv2(client, '/openerp/bases/openerp_demo/')
    ###name = raw_input('nom du report: ')
    ###extension = raw_input('format du fichier (par exemple: pdf): ')
    ###report1.run(name, extension)'''
except:
    print 'Running error'
    sys.exit(1)

# vim:expandtab:smartindent:tabstop=4:softtabstop=4:shiftwidth=4:
